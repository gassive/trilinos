\chapter{Installing Mesquite} \label{sec:install}

\section{Requirements}

\subsection{Downloading Mesquite}
The Mesquite distribution (in source form) may be obtained at the following URL:
\begin{center}
\url{http://www.cs.sandia.gov/~web1400/1400_download.html}
\end{center}

\subsection{Supported Platforms and Build Requirements}
The Mesquite source code will compile in any environment comforming to the ISO/IEC 9899-1999 (C99), ISO/IEC 14882-1998 (C++98) and ISO/IEC 9945:2003 (POSIX) standards. It may also compile under many other environments.

Mesquite requires a reasonably standards-conforming C++ compiler and corresponding libraries.  No additional libraries are required to build the core Mesquite library. Several optional features have additional requirements.  These are listed in the next section.

Mesquite uses the GNU autotools build system.  The Makefiles generated by the
configure script should work on any Unix-like platform using the build tools
(e.g. make) provided with that platform.  The minimal requires beyond a C++
compiler are a Bourne shell (typically \texttt{/bin/sh}) implementation and
a minimal corresponding command environment and an implementation of the \texttt{make} utility.

Support for building Mesquite with Microsoft Visual Studio is no longer
available as of Mesquite version 2.0.  

%Mesquite is regularly compiled and tested on GNU/Linux with g++ 3.2 or later %and Sun with the Sun Forte C++ compiler.  

\subsection{Optional Libraries and Utilities}
\label{sec:depends}
\begin{itemize}
\item Unit tests:  Mesquite provides a series of unit tests that may be used
to verify the correct behavior of a build of the Mesquite library.  These tests
are implemented using CppUnit framework.  The CppUnit framework must be installed
to compile and run these test.  It is available at this URL:
\begin{center}
\url{http://cppunit.sourceforge.net}
\end{center}
\item ExodusII support:  To enable support for reading or writing ExodusII files in Mesquite, the header files for the ExodusII library must be available.  To link an application with a Mesquite library supporting ExodusII, the ExodusII library and possibly the NetCDF library must be available.  To obtain the ExodusII library, contact:
\begin{verbatim}
Marilyn K. Smith
Research Programs Department
Department 9103, MS 0833
Sandia National Laboratories
P.O.Box 5800
Albuquerque, NM 87185-0833
Phone: (505) 844-3082
FAX:   (505) 844-8251
Email: mksmith@sandia.gov
\end{verbatim}
The NetCDF library can be obained at the following URL:
\begin{center}
\begin{small}\url{http://my.unidata.ucar.edu/content/software/netcdf/index.html}\end{small}
\end{center}
\end{itemize}


\section{Building Mesquite}
\label{sec:compiling}
After downloading and unpacking the Mesquite source, the next step is to 
configure and build and install the Mesquite library.  
\subsection{Compiling on Unix-like systems}
This section presents the steps required to compile Mesquite with the default
options.  It is typically required
that Mesquite be "installed" before it is used in an application.  The default 
installation location is the system-wide \texttt{/usr/local} directory.  
It is more common to specify an alternate directory in which to install 
the Mesquite library and headers.  This can be done using the \texttt{--prefix}
option to the \texttt{configure} script.  Additional options are available for
fine-grained control of installation locations.
\begin{enumerate}
\item Change your working directory to the top-level Mesquite source
      directory (typically \texttt{mesquite-<version>/}).
\item Run the configure script with the command: 
\begin{center}
\texttt{./configure --prefix=<installdir>},
\end{center}
      replacing \texttt{<installedir>} with the location in which the finished
      Mesquite library is to be placed.
\item Compile Mesquite with the command: \texttt{make} 
\item Optionally verify that Mesquite compiled correctly with the command: \texttt{make check}
\item Move resulting files into the destination (install) directory with the command: \texttt{make install}
\end{enumerate}
If the configure step failed, please consult the following section describing 
some of the optional arguments to the \texttt{./configure} script. 
\subsection{Options for Unix-like systems}
This section describes the options available for customizing the build
system and the resulting Mesquite library.  An brief description of these
and other options is available with the command: \texttt{./configure --help}.

\label{mes_vars_and_defs}
The following values may be specified as environmental variables, as arguments
to the configure script using the NAME=VALUE syntax, or as arguments to \texttt{make}
using the NAME=VALUE syntax.  The value of these variables (if set) during the
configure step will become the default for the compile step.  The value of any
of these variables will override the the default if specified during the compile
step.
\begin{description}
\item[CXX]       The C++ compiler command
\item[CXXFLAGS]  Arguments to the C++ compiler, such as those specifying 
debug symbols or the optimization level.
\item[CC]        The C compiler command
\item[CFLAGS]    Command line arguments to be used for the C compiler.
\item[DOXYGEN]   The doxygen API documentation generation tool.
\end{description}

Most options to the configure script are either of the form 
\begin{center}
\texttt{--with-FEATURE[=ARG]} or \texttt{--enable-FEATURE[=ARG]}.
\end{center}
Some options may accept an additional argument following 
an `=' character.  For each --with-FEATURE option, there is also a corresponding
--without-FEATURE option.  Similarly, there is a --disable-FEATURE option 
corresponding to each --enable-FEATURE option.  The negative forms fo the options 
(--without-FEATURE and --disable-FEATURE) do not accept an additional argument.  
Only the positive form of each option is stated in the description below.  

\label{config_options}
The following general build and debug options may be specified during the configure step:
\begin{description}
\item[--enable-debug]  Select a subset of the following options that
make the most sense for developers of Mesquite.
\item[--enable-release]  This is the default behavior unless 
--enable-debug is specified.  It selects a subset of the following options that
typically work best for using Mesquite in a production application.
\item[--enable-compile-optimized] Compile with the available 
optimizations that improve performance without any significant drawbacks 
(the -O2 compiler flag.)
\item[--enable-debug-symbols] Include debugging information in
the compiled \\ Mesquite objects (the -g compiler flag).
\item[--enable-debug-assertions]  Include internal consistancy 
checks that abort when an error is detected.
\item[--enable-debug-output=n,m,...]  Enable the output of
debug and status messages to file descriptor 1 (stdout).  An 
list of integer debug flags for which to enable output may be specified 
as a comma-separated list of values.  The default is to enable debug
flags 1 and 2 if this option is specified without any explict debug
flag values.
\item[--enable-function-timers]  Enable time-profiling of
some portions of Mesquite.
\item[--enable-trap-fpe]  Enable generation of a floating-point
exception signal for arithmatic errors (e.g. division by zero.)  This is
an option intended for Mesquite developers.  Enabling this will typically cause
the application using Mesquite to abort when such an error is encountered.
\end{description}

The following options specify optional Mesquite components and the location 
of the corresponding dependencies.
\begin{description}
\item[--with-cppunit=DIR]  The CppUnit library is required to compile
and run the tests to verify that a particular build of the Mesquite library
is working correctly.  If the CppUnit library is not installed in a default location
where the ./configure script can find it, this option may be used to specify
the location.
\item[--with-exodus=DIR]  Enable support for reading and writing
ExodusII files, and optionally specify the location where the ExodusII library
and headers required for this option are installed.
\item[--with-netcdf=DIR]  Specify the location of the NetCDF library
required by the ExodusII library.  The default is to look in the ExodusII
directory.
\end{description}

\subsection{Compiling on Microsoft Windows (CMake build)}

The Mesquite source includes the necessary input files to generate Microsoft
Visual Studio project files using the CMake utility.  You will need to 
download and install the CMake utility for Windows if you have not already done so.  It is available at:
\begin{center}
 \url{http://www.cmake.org/cmake/resources/software.html}
\end{center}

Using the graphical verison of the CMake utility, select the folder containing the Mesquite source and enter a folder in which you would like the CMake output and compiled code to be stored.  Select the \texttt{Configure} button.  You will be presented with a group of configuration options.  Modify any desired options and click the \texttt{Configure} button again.  Each time you change one or more configuration options, you must click the \texttt{Configure} button to update the list of available options.  When you have finished changing build options, click the \texttt{Generate} button to generate Visual Studio input files and exit the CMake utility.

The build folder you specified in the CMake utility should now contain the necessary input files to build Mesquite using Microsoft Visual C++.  
